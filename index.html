<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>jquery.parallax-scroll demo</title>
	<link href='http://fonts.googleapis.com/css?family=Quicksand' rel='stylesheet' type='text/css'>
	<style>
		body {
			font-family: 'Quicksand', sans-serif;
			margin: 0;
		}
		section {
			width: 1200px;
			height: 3000px;
			margin: auto;
			background: #000;
		}
		header {
			position: fixed;
			background: #fff;
			color:#fff;
			padding: 80px 0;
			font-size: 2em;
			width: 100%;
			height: 10%;
		}
		h1 {
			font-weight: normal;
		}
		.github {
			background: #fff;
			position: absolute;
			top: 10px;
			right: 10px;
			width: 100px;
		}
		ul {
			text-align: left;
			margin-top: 120px;
		}
	</style>
</head>

<body>
	<section>
		<header>
			<img src="img/frame.png" alt="frame" data-parallax='{"x": 0, "from-scroll": 50, "distance": 0, "smoothness": 10}'
						data-0="background-image:linear-gradient(0deg, hsl(150, 2%, 100%), hsl(150, 2%, 100%));"
						data-2000="background-image:linear-gradient(360deg, hsl(150, 90%, 50%), hsl(150, 90%, 50%));"/>
			<img src="img/t.png" alt="t" data-parallax='{"x": -160, "from-scroll": 70, "distance": 0, "smoothness": 20}'/>
			<img src="img/s.png" alt="s" data-parallax='{"x": -226, "from-scroll": 90, "distance": 0, "smoothness": 30}'/>
		</header>
	</section>
	<!-- BODY SECTION -->
<main class="portfolio-body">
  <canvas id="portfolio-canvas"></canvas>
</main>

<style>
  body {
    margin: 0;
    background: #0d0d0d;
    color: white;
    font-family: Arial, sans-serif;
    overflow-x: hidden;
  }

  .portfolio-body {
    position: relative;
    height: 100vh;
    width: 100%;
  }

  canvas {
    display: block;
    width: 100%;
    height: 100%;
  }
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>
<script>
  // SCENE SETUP
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 100);
  camera.position.z = 5;

  const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('portfolio-canvas'), antialias: true, alpha: true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.setPixelRatio(window.devicePixelRatio);

  // LIGHTS
  const light = new THREE.DirectionalLight(0xffffff, 1);
  light.position.set(5, 5, 5);
  scene.add(light);
  scene.add(new THREE.AmbientLight(0xffffff, 0.5));

  // CARD DATA
  const projects = [
    { title: "Project One", description: "Lorem ipsum dolor sit amet.", color: 0xff4444 },
    { title: "Project Two", description: "Consectetur adipiscing elit.", color: 0x44ff44 },
    { title: "Project Three", description: "Sed do eiusmod tempor.", color: 0x4444ff }
  ];

  const cardMeshes = [];
  const geometry = new THREE.PlaneGeometry(1.5, 2);

  projects.forEach((proj, i) => {
    const material = new THREE.MeshStandardMaterial({ color: proj.color });
    const mesh = new THREE.Mesh(geometry, material);
    mesh.position.x = (i - 1) * 2.2;
    mesh.userData = proj;
    scene.add(mesh);
    cardMeshes.push(mesh);
  });

  // INTERACTION
  let mouseX = 0, mouseY = 0;
  document.addEventListener('mousemove', (event) => {
    mouseX = (event.clientX / window.innerWidth) * 2 - 1;
    mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
  });

  // SCROLL PARALLAX
  window.addEventListener('scroll', () => {
    const scrollY = window.scrollY / window.innerHeight;
    cardMeshes.forEach((mesh, i) => {
      mesh.position.y = Math.sin(scrollY + i) * 0.5;
    });
  });

  // ANIMATE
  function animate() {
    requestAnimationFrame(animate);
    cardMeshes.forEach(mesh => {
      mesh.rotation.y = mouseX * 0.2;
      mesh.rotation.x = mouseY * 0.1;
    });
    renderer.render(scene, camera);
  }
  animate();

  // RESIZE
  window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  });
</script>

	<script src="js/jquery-2.1.3.min.js"></script>
	<script src="js/jquery.easing.1.3.js"></script>
	<script src="js/jquery.parallax-scroll.js"></script>
	<script src="js/skrollr.js"></script>
	<script type="text/javascript">
		skrollr.init();
	</script>
</body>
</html>
